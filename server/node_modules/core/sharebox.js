let HTTPServer = require('core/httpserver');
let SocketServer = require('core/socketserver');
let GroupManager = require('core/groupmanager');

class Sharebox {
	/**
	 * @constructor
	 */
	constructor(var1) {
		this._options = {};

		this.setOptions(var1);
	}

	/**
	 * @param {Object} var1
	 * @param {Object} var1.socket_server
	 * @param {number} var1.socket_server.port
	 * @param {Object} var1.http_server
	 * @param {number} var1.http_server.port
	 * @param {Object} var1.http_server.folders
	 * @param {string} var1.http_server.folders.client
	 * @param {Object} var1.http_server.compression
	 * @param {boolean} var1.http_server.compression.enabled
	 */
	setOptions(var1) {
		this.options = Object.assign(var1, this.options);
	};

	getOptions() {
		return this.options;
	};

	run() {
		let options = this.getOptions();

		let http_server = HTTPServer.getInstance();
		http_server.setOptions(options.http_server);
		http_server.run();

		let group_manager = GroupManager.getInstance();
		group_manager.run();

		let socket_server = SocketServer.getInstance();
		socket_server.setOptions(options.socket_server);
		socket_server.run();
	};
};

module.exports = Sharebox;